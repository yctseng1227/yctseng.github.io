---
title: ã€Projectã€‘Voronoi Diagram
date: 2019-12-8 17:34:34
categories: 
- å°ˆæ¡ˆå¯¦ä½œ
tags:
- Algorithm


---

[![](https://pbs.twimg.com/media/D6tZ-v4UIAAMm7t?format=jpg&name=large)](https://twitter.com/potch/status/1129095107855040513?s=20)

Hmmmmmmm... ä¸Šåœ–æ˜¯ç†æƒ³ä¸­çš„Voronoi Diagram

ä¸éå¾ˆéºæ†¾çš„æ˜¯Algorithmé€™é–€èª²æˆ‘æ²’æˆåŠŸåšå‡ºä¾†QQ

å³ä¾¿å¦‚æ­¤é‚„æ˜¯è¦å¯«å ±å‘Šï¼šï¼‰

<!--more-->

&nbsp;

æ™‚ç¨‹è¦åŠƒ

- 11/14 åˆæ¸¬(åŸºæœ¬åŠŸèƒ½+3é»VD)ï¼š19.5 / 20
- 12/05 å®Œæ¸¬(å®Œæ•´åŠŸèƒ½+4é»ä»¥ä¸ŠVD)ï¼š34 / 60
- 12/13 å ±å‘Šæ’°å¯«ï¼š?? / 20

[å¯¦æ–½è¦é»](http://par.cse.nsysu.edu.tw/~cbyang/course/algo/algo_report.htm)&nbsp;&nbsp;[åˆæ¸¬è©•åˆ†æ¨™æº–](http://par.cse.nsysu.edu.tw/~cbyang/course/algo/Voronoi_evaluate_first.pdf)&nbsp;&nbsp;[å®Œæ¸¬è©•åˆ†æ¨™æº–](http://par.cse.nsysu.edu.tw/~cbyang/course/algo/Voronoi_evaluate_second.pdf)

Code: https://github.com/yctseng1227/voronoi_project

å¾`commits`æ•¸é‡æ‡‰è©²ä¸é›£çœ‹å‡ºèŠ±äº†ä¸å°‘æ™‚é–“åœ¨ä¸Šé¢ï¼Œä½†æ•ˆæœé¡¯ç„¶å¾ˆç³Ÿ

æˆ‘çˆ› QQ

---

ç”±æ–¼é€™ä»½ä½œæ¥­ä¸å…‰æ˜¯å¯«å‡ºVDæ¼”ç®—æ³•ï¼Œé‚„å¿…é ˆå°‡åœ–ç‰‡ç•«å‡ºä¾†ï¼
æ‰€ä»¥åœ¨ä½œåœ–ä¸Šæˆ‘é¸æ“‡Pythonï¼Œæƒ³èªªCTFä¹Ÿæœƒç”¨åˆ°å°±åŠ æ¸›ç·´èªæ³•M(\_ \_)M

ä½¿ç”¨çš„ç’°å¢ƒæ˜¯Python 3.6ï¼Œè€ƒæ…®åˆ°æœƒç”¨åˆ°ä¸€äº›å¥‡æ€ªå¥—ä»¶ï¼Œæ‰€ä»¥å…ˆå»ºç«‹è™›æ“¬ç’°å¢ƒvenvç­‰å‰ç½®ä½œæ¥­ã€‚

ä½œåœ–æ–¹é¢åŸæœ¬æ¡ç”¨çš„æ˜¯Pythoné–‹æºå‡½å¼åº«-`kivy`ï¼Œçµæœå› ç‚ºåŠ©æ•™çš„ä½œæ¥­ç’°å¢ƒæ˜¯Windowsï¼Œæ‰€ä»¥æ‰“åŒ…æˆ`.exe`çš„éç¨‹æœƒç™¼ç”Ÿå¥—ä»¶è¡çªï¼Œå› æ­¤åœ¨åˆæ¸¬å‰å¹¾å¤©å¿ç—›æ¬å®¶åˆ°Pythonå…§å»ºå‡½å¼åº«-`tkinter`ï¼Œé€™éç¨‹å¤§ç´„èŠ±äº†æˆ‘ä¸€å¤©çš„æ™‚é–“åœ¨è™•ç†QQ

å…ˆä¾†çœ‹çœ‹é‚„æ²’åˆæ¸¬å°±èƒæ­»è…¹ä¸­çš„`kivy`ä»‹é¢ğŸ‘‡ğŸ‘‡

![](https://github.com/yctseng1227/voronoi_project/blob/master/pic/pic05.png?raw=true)

å€‹äººè¦ºå¾—`kivy`åœ¨åœ–å½¢ç•Œé¢ä¸Šæ¯”è¼ƒç†æƒ³ï¼Œè€Œä¸”`.kv`åœ¨å»ºæ§‹ä¸Šä¹Ÿæ¯”è¼ƒå®¹æ˜“æ•´ç†ï¼Œè‡¨æ™‚æ¬åˆ°`tkinter`åè€Œcodeè¢«æˆ‘å¯«çˆ›äº†ï¼Œé›–ç„¶æ˜¯å¯ä»¥å‹‰å¼·åŸ·è¡Œï¼Œä½†é€ æˆå¾ŒçºŒå¯«å¤šé»VDç¶­è­·ä¸Šçš„å›°é›£QQ

å¦å¤–åœ¨æ‰“åŒ…`.exe`æ–¹é¢ï¼Œç”±æ–¼æˆ‘çš„ä½œæ¥­ç’°å¢ƒæ˜¯UbuntuOSï¼Œåœ¨è©²ç³»çµ±çš„`Pyinstaller`æ“ä½œä¸‹ç”Ÿæˆçš„åŸ·è¡Œæª”ä¸¦ç„¡æ³•åœ¨WindowsOSç’°å¢ƒä¸‹åŸ·è¡Œï¼Œæœ€å¾ŒæŠ˜è¡·å’ŒåŒå­¸å€Ÿé›»è…¦é€²è¡Œæ‰“åŒ…ï¼Œä¹Ÿå› æ­¤æ²’æ©Ÿæœƒé‡å°`.exe`ä½œå¤šæ¬¡æª¢æŸ¥ï¼Œçµæœå°±æ˜¯åˆæ¸¬æ™‚ç™¼ç”Ÿ`.py`å’Œ`.exe`åŸ·è¡ŒåŒä¸€ç­†æ¸¬è³‡å‡ºç¾ä¸åŒçš„çµæœï¼ŒçœŸçš„æ˜¯è¦‹é¬¼äº†wwww è‡³ä»Šé‚„æ˜¯æ²’è¾¦æ³•è§£é‡‹è©²æƒ…æ³æ€éº¼æœƒå‡ºç¾...

è€Œåœ¨å¤šé»VDçš„æ“ä½œä¸Šï¼Œå–®ç´”ä»¥Divide-and-Conqueræ¼”ç®—æ³•ä¾†èªªä¸¦ä¸å›°é›£ï¼Œä½†æ˜¯åœ¨åœ–å½¢çš„å¯¦ç¾æ–¹é¢éœ€è¦è€ƒé‡ç·šæ¢çš„è·é›¢ç¹ªè£½ï¼Œæ¯”èµ·æ¶ˆé™¤å¤šé¤˜ç·šæ¢ï¼Œå€‹äººå‚¾å‘ä¿®æ­£ç·šæ¢çš„èµ·è¨–ã€‚åœ¨é€²è¡ŒHyperplaneçš„æ™‚å€™ï¼Œæ’åˆ°çš„VDç·šä¸æ›‰å¾—åˆ°åº•è©²å¾€å“ªé‚Šé€²è¡Œç¸®æ¸›ï¼Œå°è‡´æœ€å¾Œç•«å‡ºä¾†çš„çµæœå¸¸å¸¸æœƒæ˜¯ç›¸åçš„æ–¹å‘ï¼Œé€™ç´°ç¯€å¤§éƒ¨åˆ†çš„VDçš„ä¸å¤ªæœƒæåŠï¼Œå› æ­¤debugæ–¹é¢èŠ±äº†ç›¸ç•¶å¤šçš„æ™‚é–“å»"çŒœ"æ€éº¼ç•«ç·šï¼Œæœ€å¾Œé‚„æ˜¯ä¸å¦‚é æœŸåœ°æ‹¿äº†ä½åˆ†ï¼ˆå”‰

å¦å¤–å°±æ˜¯step by stepï¼Œå¹³å¸¸å°‘æœ‰æ©Ÿæœƒé‡åˆ°é€™ç¨®æ“ä½œï¼Œæˆ‘ç”¨çš„æ˜¯ä»¥`list`å½¢å¼æŠŠæ¯å€‹ä¸åŒéšæ®µçš„points listå’Œedge listè¨˜éŒ„ä¸‹ä¾†ï¼Œç­‰éœ€è¦çš„æ™‚å€™(æŒ‰button)å†é€ä¸€å¾è©²`list`å–å‡ºä¾†ç¹ªè£½ï¼Œä¸éåœ¨å®Œæ¸¬æ™‚çœ‹èµ·ä¾†æ˜¯å„²å­˜points listå’Œedge listçš„æ™‚æ©Ÿä¸å°ï¼Œé€ æˆæ–·é»ç›¸ç•¶æ˜é¡¯ç¨ç¨è¦ºå¾—å¯æƒœã€‚

ç¸½é«”ä¾†èªªï¼ŒèŠ±äº†æ™‚é–“å»æ‹¿ä¸åˆ°ç›¸å°çš„åˆ†æ•¸ï¼Œå—šå—šæµªè²»æ™‚é–“QQ

ç°¡å–®ä»‹ç´¹ä¸€ä¸‹åŠŸèƒ½ï¼š

![](https://github.com/yctseng1227/voronoi_project/blob/master/pic/pic02.png?raw=true)

- import: è®€æª”æ ¼å¼å¦‚ä¸‹

```
P 103 200
P 193 64
P 193 370
P 283 200
E 0 34 193 161
E 0 363 193 261
E 193 161 193 261
E 193 161 437 0
E 193 261 600 476
```

- load: è®€æª”æ ¼å¼å¦‚ä¸‹

```
# comment
6
487 191
417 388
504 349
681 125
589 282
725 279
6
69 304
110 449
174 333
244 280
335 139
355 284
12
69 304
174 333
110 449
335 139
244 280
355 284
487 191
417 388
504 349
681 125
589 282
725 279
0
# any else?
```

- random: éš¨æ©Ÿç”ŸæˆNå€‹é»ï¼Œé è¨­ç‚º6é»å¯é‡è¤‡ç–ŠåŠ 
- save: å°‡point, edgeå­˜æˆ`import`æ ¼å¼
- next case: ç•¶è®€å…¥çš„æª”æœ‰å¤šç­†caseï¼Œä¾æ­¤æŒ‰éˆ•é€²è¡Œä¸‹ä¸€ç­†testcase
- step by step: ä¾Divide-and-Conqueré€æ­¥åŸ·è¡Œ
- run VD: ç•«å‡ºVoronoi Diagramçµæœ
- clearï¼šæ¸…é™¤ç•«å¸ƒ
- convex hull: å°‡æ‰€æœ‰çš„Convex Hullç•«å‡ºï¼Œç®—æ˜¯æ‹¿ä¾†dubugç”¨çš„XD

ç’°å¢ƒ

- Operating System
```javascript
                          ./+o+-       
                  yyyyy- -yyyyyy+      Username: yctseng
               ://+//////-yyyyyyo      OS: Ubuntu 18.04 bionic
           .++ .:/++++++/-.+sss/`      Kernel: x86_64 Linux 5.0.0-36-generic
         .:++o:  /++++++++/:--:/-      Uptime: 9d 18h 15m
        o:+o+:++.`..```.-/oo+++++/     Packages: 2347
       .:+o:+o/.          `+sssoo+/    Shell: bash 4.4.20
  .++/+:+oo+o:`             /sssooo.   Resolution: 3840x1080
 /+++//+:`oo+o               /::--:.   DE: GNOME 
 \+/+o+++`o++o               ++////.   WM: GNOME Shell
  .++.o+++oo+:`             /dddhhh.   WM Theme: Adwaita
       .+.o+oo:.          `oddhhhh+    GTK Theme: Ambiance [GTK2/3]
        \+.++o+o``-````.:ohdhhhhh+     Icon Theme: ubuntu-mono-dark
         `:o+++ `ohhhhhhhhyo++os:      Font: Ubuntu 11
           .o:`.syhhhhhhh/.oo++o`      CPU: Intel Core i7-8700 @ 12x 4.6GHz
               /osyyyyyyo++ooo+++/     GPU: intel
                   ````` +oo+++o\:     RAM: 15831MiB
                          `oo++.
```
- Python3.6 (Virtual environment)
- Package version
    - imutils==0.5.3
    - Kivy==1.11.1
    - numpy==1.13.3
    - scipy==0.19.1
    - pyinstaller==3.5 (WindowsOS)

### **Data Structure**

- **Point**: 
ç”¨Pythonçš„`tuple`è³‡æ–™å‹æ…‹ä»¥$(x, y)$å„²å­˜è®€å…¥çš„pointsï¼Œå†æ”¾å…¥`list`ç•¶ä½œè©²testcaseçš„point listã€‚
- **Edge**
å¾Pythonç’°å¢ƒè€Œè¨€ï¼Œå¿…é ˆç”¨å…©é»æ‰èƒ½ç•«æˆä¸€ç·šï¼Œæ‰€ä»¥åœ¨è³‡æ–™çµæ§‹ä¸Šä»¥$[(x1, y1), (x2, y2)]$æ–¹å¼å„²å­˜ã€‚å¦å¤–ä¸€ç¨®æ˜¯é€²è¡Œä¸­å‚ç·šç¹ªè£½æ™‚ï¼Œç”±æ–¼é™¤äº†è©²ä¸­å‚ç·šä»¥åŸæœ¬$[(x3, y3), (x4, y4)]$ å„²å­˜å¤–ï¼Œé‚„å¿…é ˆè¨˜éŒ„è©²ç·šæ˜¯ä»¥å“ªä¸€æ¢ç·šä½œç‚ºä¸­ç·šåŸºæº–ï¼Œå› æ­¤å„²å­˜æ–¹å¼ç‚º$[(x3, y3), (x4, y4), (form\_x1, form\_y1), (form\_x2, form\_y2)]$ï¼Œæ–¹ä¾¿å¾ŒçºŒé€²è¡ŒVDã€‚
- **Convex Hull (CH)**
å‰ç½®ä½œæ¥­ç‚ºé‡å°$x$åº§æ¨™å°‡point listé€²è¡Œæ’åºï¼Œå› æ­¤CH functionçš„å›å‚³å€¼ç‚ºCHçš„æé»é †åºã€‚
- **Voronoi Diagram (VD)**
VDçš„è³‡æ–™å‹æ…‹ç‚ºedge listï¼Œå…¶ä¸­ä¸ä¹ä¸Šè¿°Edge data structureçš„å…©ç¨®å„²å­˜æ–¹å¼ã€‚

### **Algorithm**

- **Convex Hull (CH)**
åˆ©ç”¨æ’åºå…ˆæ‰¾åˆ°æœ€å¤–åœçš„ä»»ä¸€pointä½œç‚ºèµ·é»ï¼Œçª®èˆ‰å¹³é¢ä¸Šæ‰€æœ‰çš„é»ï¼Œåˆ©ç”¨å‘é‡ç©(cross product)åˆ¤æ–·æ˜¯å¦åœ¨åœˆå…§oråœˆå¤–ï¼Œé †è‘—å¤–åœç¹ä¸€åœˆã€‚

- **Voronoi Diagram (VD)**
3é»ä»¥å…§åˆ©ç”¨å¤–å¿ƒä»¥åŠå„é‚Šçš„ä¸­é»ï¼Œè€ƒæ…®å„ç¨®æƒ…æ³ä¸‹ç•«å‡ºVDã€‚
å¤šé»æƒ…æ³ï¼Œåˆ©ç”¨`Divide-and-Conquer`é€²è¡Œå¯¦ä½œï¼Œåœ¨éè¿´è‡³3é»ä»¥ä¸‹æ™‚å°‡æœƒç›´æ¥å›å‚³çµæœï¼Œæ­¤å¤–å°‡point setæ‹†æˆå…©é‚Šé€²è¡Œéè¿´å¾Œå†åˆä½µï¼Œè©³è¦‹å¦‚ä¸‹(nç‚ºpoints count)ã€‚
$$ f(point\ set)=\left\{
\begin{aligned}
Do\ nothing && n = 1 \\
Return\ Line && n = 2 \\
Return\ VD && n = 3 \\
Return\ Merge(f(point\ set[0, n/2]),f(point\ set[n/2, n])) && n > 3 \\
\end{aligned}
\right.
$$
é‡å°`Merge function`ï¼Œå…¶æ­¥é©Ÿå¦‚ä¸‹:
- step 0. Hyperplaneé è¨­åœ¨ç•«å¸ƒç”±ä¸Šå¾€ä¸‹æå‡ºã€‚
- step 1. å°‡å…©é‚Špoints setå„è‡ªä»¥yåº§æ¨™é€²è¡Œæ’åºï¼Œæ‰¾å‡ºæœ€ä¸Šé¢å…©é»ä½œç‚ºåƒè€ƒé»ã€‚
- step 2. åˆ©ç”¨åƒè€ƒé»ç•«å‡ºçš„ä¸­å‚ç·šä½œç‚ºHyperplaneï¼Œä¸¦ä¸”å’Œå…©é‚ŠVDçš„æ‰€æœ‰edge setæ‰¾å‡ºæœ€ä¸Šé¢çš„äº¤é»ï¼Œä¸¦è¨˜éŒ„æ’åˆ°çš„edgeã€‚
- step 3. æ ¹æ“šæ’åˆ°çš„edgeé€²è¡Œåƒè€ƒé»ç§»å‹•ï¼Œä¸¦æ¶ˆé™¤å¤šé¤˜çš„ç·šã€‚
- step 4. é‡è¤‡step 2å’Œstep 3ï¼Œç›´åˆ°å…©é‚Špoint setèµ°åˆ°åº•ç‚ºæ­¢ã€‚

<center>(ä¸‹é¢å…©å¼µåœ–å„6é»ã€‚<font color="#0000FF">è—ç·šç‚ºCH</font>; <font color="#00FF00">ç¶ ç·šç‚ºVD</font>; <font color="FF0000">ç´…ç·šç‚ºHyperplane</font>)</center>
{% gp 2-2 %}

![](https://github.com/yctseng1227/voronoi_project/blob/master/pic/pic07.png?raw=true =340x) ![](https://github.com/yctseng1227/voronoi_project/blob/master/pic/pic06.png?raw=true =340x)

{% endgp %}

### **Result**

![](https://github.com/yctseng1227/voronoi_project/blob/master/pic/pic03.png?raw=true)